#summary What needs to be done to support the TEI P5 facsimile features.

= Introduction =

TEI P5 contains a [http://www.tei-c.org/release/doc/tei-p5-doc/en/html/ref-facsimile.html facsimile element] to represent scanned documents, as well as some other features to better support facsimiles. These features can be used to link to the original scans.

Often scans are already available at some place on the web, and we may wish to point to them, sometimes, we wish to include them with our ebook, so we have two types of facsimiles: external images and internal images.

= Facsimile Element =

The `facsimile` element is a top-level element, that describes a series of page images, and can stand independently of the transcribed text. This allows to specify just the metadata (in the Header) and the scans, to produce a digital facsimile.

{{{
   <facsimile>
      <graphic id=facs123 url="p123.gif"/>
   </facsimile>
}}}

= `@facs` Attribute =

The `@facs` attribute on `pb` elements can be used to point to scanned images of transcribed pages. This can be used to either link to some external source of page images (for example in the Internet Archive), or to link to an internal set of images (kept in a page-images sub-directory, for example).

{{{
  <pb n=123 facs="p123.gif"/>
}}}

Lets call this "direct" facsimile links.

Alternatively, it can link to an element in the `facsimile` element, for example:

{{{
  <pb n=123 facs="#facs123"/>
}}}

Lets call this "indirect" facsimile links.

This later case also allows to point to zones within a page, but that is currently out-of-scope for tei2html.

The two ways should not be combined. Currently, the code only allows the "direct" way of linking to page images.

== Comparison of direct and indirect linking to facsimiles ==

=== Direct ===

Generate output wrapper file for each `pb`-element.

Location in text version defined by that `pb`-element.

Non-transcribed pages cannot be included (or should encode additional `pb`-elements)

=== Indirect ===

Generate output wrapper file for each `graphic`-element.

Need to look-up referring `pb`-element to find location in text version.

Not all `graphic`-elements might be referred to by a `pb`-element.

= Generated Output =

== HTML ==

The output consists of a series of HTML pages, one per page, with some metadata in the heading of the page, and some navigational aids to conveniently jump to another page.

By convention, the facsimile images and wrapper pages will go into a directory `page-images`, and will look like this:

{{{
  <html>
    <head>
      <title>Document title, page x</title>
    </head>
    <body>
      <div class="facsimile-header">
         <h1>Document Title, by Document Author, Page x</hi1>
      </div>
      <div class="facsimile-navigation">
         <!-- Buttons to go to previous and next page, and back to text -->
      </div>
      <div class="facsimile-page>
         <img src="\images\pages\p123.gif"/>
      </div>
    </body>
  </html>
}}}

For each `pb`-element for which a `@facs` attribute is present, a link will be generated to the wrapper file, decorated with a facsimile page-image icon.

=== Things to show ===

In header

  * Title of document
  * Name of author
  * Page number (if encoded in `@n` attribute)
  * Title(s) of current division at bottom of page.

Titles are indicated as follows as bread-crumbs:

{{{
(Front | Body | Back |) > Title Level 1 > Title Level 2 > ... > Page 123
}}}

Each of these elements are active links, and will link back to those pages (content or facsimile view, to be decided)

Issue: current code removes unused anchors in HTML, using a Perl script, that needs to be modified, as anchors used by those 'external' HTML files are not recognized.

Issue: our current conventions put the `pb` just before the `div#`s. This will lead to the wrong header above the page-image for the first page of a section. Need to add check for case that `pb` element is (almost) last element of a `div#`.

In Navigation

  * Link to Previous Page
  * Link to Next Page
  * (Optional) Links to all pages
  * Link back to location in transcribed text.

== ePub ==

Similar to HTML, taking into account additions to Spine, metadata, etc.